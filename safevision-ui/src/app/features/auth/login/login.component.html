<div class="login-wrapper">
  <mat-card class="login-card">

    <mat-card-header>
      <mat-card-title>üîê SafeVision</mat-card-title>
      <mat-card-subtitle><br/>Entre para monitorar</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Usu√°rio</mat-label>
          <input matInput formControlName="username" placeholder="Ex: admin">

          <mat-icon matSuffix>person</mat-icon>

          @if (loginForm.get('username')?.hasError('required')) {
            <mat-error>Usu√°rio √© obrigat√≥rio</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Senha</mat-label>

          <input
            matInput
            [type]="hidePassword() ? 'password' : 'text'"
            formControlName="password"
            placeholder="Digite sua senha"
          >


         <button
            mat-icon-button
            matSuffix
            (click)="togglePassword($event)"
            type="button"
            [attr.aria-label]="hidePassword() ? 'Mostrar senha' : 'Ocultar senha'"
          >
            <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>

          @if (loginForm.get('password')?.hasError('required')) {
            <mat-error>Senha √© obrigat√≥ria</mat-error>
          }
        </mat-form-field>

        <div class="actions">
          <button
            mat-flat-button
            color="primary"
            type="submit"
            [disabled]="loginForm.invalid || isLoading()"
            class="submit-btn"
          >
            @if (isLoading()) {
              <mat-spinner diameter="20" color="accent"></mat-spinner>
            } @else {
              <span>Entrar</span>
            }
          </button>
        </div>

      </form>
    </mat-card-content>

    <mat-card-footer>
      <p>N√£o tem conta? <a mat-button color="accent" routerLink="/register">Registre-se</a></p>
    </mat-card-footer>

  </mat-card>
</div>
